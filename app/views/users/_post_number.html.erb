 <table class="table">
  <thead>
   <tr>
    <th>今日の投稿数</th>
    <th>前日の前日の投稿数</th>
    <th>前日比</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td><%= today_book.count %></td>
    <td><%= yesterday_book.count %></td>
    <td>
     <% if yesterday_book.count == 0 %>
      前日の投稿はありません
     <% else %>
      <% the_day_before = today_book.count / yesterday_book.count.to_f %>
      <%= (the_day_before * 100).round %>
     <% end %>
    </td>
   </tr>
  </tbody>
  <tbody>
   <tr>
    <th>今週の投稿</th>
    <th>先週の投稿</th>
    <th>比</th>
   </tr>
  </tbody>
  <tbody>
   <tr>
    <td><%= this_week_book.count %></td>
    <td><%= last_week_book.count %></td>
    <% if last_week_book.count == 0 %>
     <td>先週の投稿はありません</td>
    <% else %>
     <td>
      <% the_week_before = this_week_book.count / last_week_book.count.to_f %>
      <%= (the_week_before * 100).round %>
    <% end %>
     </td>
   </tr>
  </tbody>
  <tbody>
   <tr>
    <td>６日前</td>
    <td>５日前</td>
    <td>４日前</td>
    <td>３日前</td>
    <td>２日前</td>
    <td>昨日</td>
    <td>今日</td>
   </tr>
  </tbody>
  <tbody>
   <tr>
    <td><%= books.created_6days.count %></td>
    <td><%= books.created_5days.count %></td>
    <td><%= books.created_4days.count %></td>
    <td><%= books.created_3days.count %></td>
    <td><%= books.created_2days.count %></td>
    <td><%= yesterday_book.count %></td>
    <td><%= today_book.count %></td>
   </tr>
  </tbody>
 </tabel>
 
 <canvas id="myLineChart"></canvas>
 <script>
  $(document).on('turbolinks:load', function(){
   var ctx = document.getElementById("myLineChart");
   var myLineChart = new Chart(ctx, {
    type: 'line',
    data: {
     labels: ['６日前','５日前','４日前','３日前','２日前','今日'],
     datasets:[
      {
       label: '投稿した本の数',
       data:
        [
         <%= books.created_6days.count %>,
         <%= books.created_5days.count %>,
         <%= books.created_4days.count %>,
         <%= books.created_3days.count %>,
         <%= books.created_2days.count %>,
         <%= yesterday_book.count %>,
         <%= today_book.count %>
        ],
        borderColor: "rgba(0, 0, 255, 1)",
        backgroundColor: "rgba(0, 0, 0, 0)",
      }
      ]
    }
   }
  }
 </script>
 
 